<!DOCTYPE html>
<html lang="nl">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
       <title> Testomgeving canvas  </title>
	<link rel="stylesheet" href="stijl.css" />
</head>
<body>
			
			<!-- Beginbox -->
			<div id="beginbox" class="beginbox">
				<canvas  width="600" height="300" id="begincanvas" >
                </canvas>
                <br>
				
				<a class="btn easy" onclick="gemakkelijkBegin()"><div>Gemakkelijk</div></a>
				<a class="btn normal" onclick="middelmatigBegin()"><div>Normaal</div></a>
				<a class="btn hard" onclick="moeilijkBegin()"><div>Moeilijk</div></a>
			</div>
			
			<!-- Het Spel-->
			<div id="spel" class="spel">
				<!-- afbeeldingen -->
				<div style="display:none;">
					
					<!-- extra figuren -->
					<img src="ster.jpg" alt="ster" id="vorm3" />
					<img src="zeshoek.jpg" alt="zeshoek" id="vorm4" />
				
					<!-- extra kleuren -->
					<img src="paars.jpg" alt="paars" id="kleur3" />
					<img src="geel.jpg" alt="geel" id="kleur4" />
				
					<!-- wiskundige symbolen -->
					<img src="Gelijkheidsteken.jpg" alt ="gelijkheidsteken" id="gelijkheidsteken" />
					<img src="plusteken.jpg" alt="plusteken" id="plusteken" />
			
					<!-- mogelijke antwoorden -->
					<img src="blauwVierkant.jpg" alt ="blauwVierkant" id="0" /> <!-- makkelijk -->
					<img src="blauwDriehoek.jpg" alt ="blauwDriehoek" id="1" /><!-- makkelijk -->
					<img src="blauwCirkel.jpg" alt ="blauwCirkel" id="2" /><!-- makkelijk -->
					<img src="blauwSter.jpg" alt ="blauwSter" id="3" />	<!-- normaal -->
					<img src="blauwZeshoek.jpg" alt ="blauwZeshoek" id="4" /><!-- moeilijk -->
					<img src="groenVierkant.jpg" alt ="groenVierkant" id="5" /><!-- makkelijk -->
					<img src="groenDriehoek.jpg" alt ="groenDriehoek" id="6" /><!-- makkelijk -->
					<img src="groenCirkel.jpg" alt ="groenCirkel" id="7" /><!-- makkelijk -->
					<img src="groenSter.jpg" alt ="groenSter" id="8" />	<!-- normaal -->
					<img src="groenZeshoek.jpg" alt ="groenZeshoek" id="9" /><!-- moeilijk -->
					<img src="roodVierkant.jpg" alt ="roodVierkant" id="10" /><!-- makkelijk -->
					<img src="roodDriehoek.jpg" alt ="roodDriehoek" id="11" /><!-- makkelijk -->
					<img src="roodCirkel.jpg" alt ="roodCirkel" id="12" /><!-- makkelijk -->
					<img src="roodSter.jpg" alt ="roodSter" id="13" /><!-- normaal -->
					<img src="roodZeshoek.jpg" alt ="roodZeshoek" id="14" /><!-- moeilijk -->
					<img src="paarsVierkant.jpg" alt ="paarsVierkant" id="15" /><!-- normaal -->
					<img src="paarsDriehoek.jpg" alt ="paarsDriehoek" id="16" /><!-- normaal -->
					<img src="paarsCirkel.jpg" alt ="paarsCirkel" id="17" /><!-- normaal -->
					<img src="paarsSter.jpg" alt ="paarsSter" id="18" /><!-- normaal -->
					<img src="paarsZeshoek.jpg" alt ="paarsZeshoek" id="19" /><!-- moeilijk -->
					<img src="geelVierkant.jpg" alt ="geelVierkant" id="20" /><!-- moeilijk -->
					<img src="geelDriehoek.jpg" alt ="geelDriehoek" id="21" /><!-- moeilijk -->
					<img src="geelCirkel.jpg" alt ="geelCirkel" id="22" /><!-- moeilijk -->
					<img src="geelSter.jpg" alt ="geelSter" id="23" /><!-- moeilijk -->
					<img src="geelZeshoek.jpg" alt ="geelZeshoek" id="24" /><!-- moeilijk -->
					
					<!-- mogelijke toestanden laadbalk -->
					<img src="nulpercent.jpg" alt="nulpercent" id="percent0"/>
					<img src="tienpercent.jpg" alt="tienpercent" id="percent1"/>
					<img src="twintigpercent.jpg" alt="twintigpercent" id="percent2"/>
					<img src="dertigpercent.jpg" alt="dertigpercent" id="percent3"/>
					<img src="veertigpercent.jpg" alt="veertigpercent" id="percent4"/>
					<img src="vijftigpercent.jpg" alt="vijftigpercent" id="percent5"/>
					<img src="zestigpercent.jpg" alt="zestigpercent" id="percent6"/>
					<img src="zeventigpercent.jpg" alt="zeventigpercent" id="percent7"/>
					<img src="tachtigpercent.jpg" alt="tachtigpercent" id="percent8"/>
					<img src="negentigpercent.jpg" alt="negentigpercent" id="percent9"/>
					<img src="honderdpercent.jpg" alt="honderdpercent" id="percent10"/>
				</div>

				<div class="test">
				<!-- De verhouding tussen width en height is altijd 2 op 1 -->
				<canvas id="hetCanvas" width="600" height="300">
				</canvas>
				
				 
				<!-- Kleurenarray -->
				<h3><b>Kies een kleur</b></h3>
				<p id="kleurenArray">
					<img src ="blauw.jpg" alt="blauw" id="kleur0"
						onclick="kleurGekozen(this.id)" width="10" height="10"/>
					<img src="groen.jpg" alt="groen" id="kleur1"
						onclick="kleurGekozen(this.id)" width="10" height="10"/>
					<img src="rood.jpg" alt="rood" id="kleur2"
						onclick="kleurGekozen(this.id)" width="10" height="10"/>
				</p>
			
				<!-- Vormenarray -->
				<h3><b>Kies een vorm</b></h3>
				<p id="vormenArray">
					<img src ="vierkant.jpg" alt="vierkant" id="vorm0"
						onclick="vormGekozen(this.id)" width="10" height="10"/>
					<img src="driehoek.jpg" alt="driehoek" id="vorm1"
						onclick="vormGekozen(this.id)" width="10" height="10"/>
					<img src="cirkel.jpg" alt="cirkel" id="vorm2"
						onclick="vormGekozen(this.id)" width="10" height="10"/>
				</p>
            
				<!-- Controleerknop -->
				<a class="btn easy" onClick="check()"><div>Verbeteren</div></a>
				</div>
			
			</div>
			
			<!-- Box indien een juist antwoord -->
			<div id="juistAntwoord" class="tussenbox">
				<p id="juistAntwoordTekst">Hoera, je hebt het juist! Wil je nog eens?</p>
				<a class="btn easy" onclick="nogEensSpelen()"><div>Nog een keer</div></a>
			</div>
			
			<!-- Box indien een fout antwoord -->
			<div id="foutAntwoord" class="tussenbox">
				<p id="foutAntwoordTekst">Jammer, je hebt het fout. Wil je nog eens?</p>
				<a class="btn easy" onclick="gemakkelijkBegin()"><div>Gemakkelijk</div></a>
                <a class="btn normal" onclick="middelmatigBegin()"><div>Normaal</div></a>
                <a class="btn hard" onclick="moeilijkBegin()"><div>Moeilijk</div></a>
            <p id="speler1"></p> <br>
            <p id="speler2"></p> <br>
            <p id="speler3"></p> <br>
            <p id="speler4"></p> <br>
            <p id="speler5"></p> <br>
                
			</div>
    
           
			
			<!-- JavaScript -->
			<script type="text/javascript">
			
			//canvasvariabelen
			var canvas;
			var ctx;
			var l; 
			var h;
			
			//globale uitvoervariabelen
			var uitvoerInteger;
			
			//globale afbeeldingvariabelen
			//
			//Het teken van een afbeelding gebeurt met ctx.drawImage(varImg,
			//linkerhoekco√∂rdinaten,afmetingenAfbeelding)
			var gelijkheidstekenImg = document.getElementById("gelijkheidsteken");
			var plustekenImg = document.getElementById("plusteken");
			var outputImg;
			var blauwImg = document.getElementById("kleur0");
			var groenImg = document.getElementById("kleur1");
			var roodImg = document.getElementById("kleur2")
			var paarsImg = document.getElementById("kleur3");
			var geelImg = document.getElementById("kleur4");
			var vierkantImg = document.getElementById("vorm0");
			var driehoekImg = document.getElementById("vorm1");
			var cirkelImg = document.getElementById("vorm2");
			var sterImg = document.getElementById("vorm3");
			var zeshoekImg = document.getElementById("vorm4");
			var laadBarImg;
			
			//globale moeilijkheidsvariabele
			var niveau;
			
			//globale kleur- en vormarrayvariabelen
			var kleurArray = document.getElementById("kleurenArray");
			var vormArray = document.getElementById("vormenArray");
			
			//globale inputsvariabele
			var invoerKleur;
			var invoerVorm;
			
			//globale variabele voor score bij te houden
			var naam = "Joske Vermeulen"
            var punten;
            var response;
            var items;
			
			//globale boxvariabelen
			var beginbox = document.getElementById("beginbox");
			var spel = document.getElementById("spel");
			var juistAntwoordBox = document.getElementById("juistAntwoord");
			var foutAntwoordBox = document.getElementById("foutAntwoord");
			
			
			
			//evenListener voor juistAntwoordBox
			function nogEensSpelen(){
				juistAntwoordBox.style.visibility = "hidden";
				spel.style.display = "block";
				laadSpel();
			}
			
			//eventListeners voor beginBoxKnoppen
			function gemakkelijkBegin(){
				punten = 0;
				localStorage.setItem("punten",punten);
			
				niveau = 1;
				beginbox.style.visibility = "hidden";
				foutAntwoordBox.style.visibility = "hidden";
				spel.style.display = "block";
				laadSpel();
			}
			
			function middelmatigBegin(){
				punten = 0;
				localStorage.setItem("punten",punten);
			
				niveau = 2;
				beginbox.style.visibility = "hidden";
				foutAntwoordBox.style.visibility = "hidden";
				spel.style.display = "block";
				laadSpel();
			}
			
			function moeilijkBegin(){
				punten = 0;
				localStorage.setItem("punten",punten);
			
				niveau = 3;
				beginbox.style.visibility = "hidden";
				foutAntwoordBox.style.visibility = "hidden";
				spel.style.display = "block";
				laadSpel();
			}
			
			//de eventlisteners voor de invoerafbeeldingen
			function kleurGekozen(id){
				invoerKleur = parseInt(id.charAt(5),10);
				tekenInvoerKleur();
			}
			
			function vormGekozen(id){
				invoerVorm = parseInt(id.charAt(4),10);
				tekenInvoerVorm();
			}
			
			function tekenInvoerKleur(){
				var invoerKleurImg = document
					.getElementById("kleur"+invoerKleur.toString());
				ctx.drawImage(invoerKleurImg,0.5*l,h,l,h);
			}
			
			function tekenInvoerVorm(){
				var invoerVormImg = document
					.getElementById("vorm"+invoerVorm.toString());
				ctx.drawImage(invoerVormImg,2.5*l,h,l,h);
			}
			
			//random outputafbeelding rekening houdend met
			//het niveau
			function uitvoerIntegerOke(){
				var bool1 = uitvoerInteger/(niveau+2)<5;
				var bool2 = uitvoerInteger%5<niveau+2;
				
				return bool1 && bool2;
			}
			
			function randomIntegerGenerator(){
				return Math.floor(Math.random()*25);
			}
			
			function uitvoerAfbeeldingGenerator(){
				uitvoerInteger = randomIntegerGenerator();
				while(!uitvoerIntegerOke()){
					uitvoerInteger = randomIntegerGenerator();
				}
				return document.getElementById(uitvoerInteger.toString());
			}
            
			//controleerknopfunctie
			function toonBoxJuistAntwoord(){
				spel.style.display = "none";
				juistAntwoordBox.style.visibility = "visible";
			}
			
			function toonBoxFoutAntwoord(){
				spel.style.display = "none";
				foutAntwoordBox.style.visibility = "visible";
			}
			
			function isInvoerJuist(){
				return invoerKleur == Math.floor(uitvoerInteger/5) 
					&& invoerVorm == uitvoerInteger%5;
			}
			
            function check() {
				if(isInvoerJuist()){
				    punten = localStorage.getItem("punten"); 
                    punten++;
                    localStorage.setItem("punten", punten);
					toonBoxJuistAntwoord();
				}
				else{
					//hier de punten nog niet op nul zetten
					//we kunnen die nl. nog gebruiken
					//de punten worden pas op nul gezet
					//wanneer de speler een nieuw spel begint
                    toonBoxFoutAntwoord();
                    doWork();
				}
            }
			
			//Spel laden
			function setCanvasVariabelen(){
				canvas = document.getElementById('hetCanvas');
				ctx = canvas.getContext('2d');
				ctx.fillStyle = "#FFFFFF";
				l = canvas.width/6;
				h = canvas.height/3;
                
			}
			
			function tekenLaadBar(){
				if(punten>10){
					laadBarImg = document.getElementById("percent10");
				}
				else{
					var id = "percent"+punten;
					laadBarImg = document.getElementById(id);
				}
				ctx.drawImage(laadBarImg,0,2*h,6*l,h);
			}
			
			function initCanvas(){
                ctx.clearRect(0,0,canvas.width,canvas.height);
				ctx.fillRect(0.5*l,h,l,h);
				ctx.drawImage(plustekenImg,1.5*l,h,l,h);
				ctx.fillRect(2.5*l,h,l,h);
				ctx.drawImage(gelijkheidstekenImg,3.5*l,h,l,h);
				outputImg = uitvoerAfbeeldingGenerator();
				ctx.drawImage(outputImg,4.5*l,h,l,h);
                ctx.font = "bold 20px Arial";
                ctx.fillStyle = "black";
                ctx.fillText("Punten: "+localStorage.getItem("punten"),480, 30);
                tekenLaadBar();
			}
			
			function setArraysGemakkelijk(){
				blauwImg.width = l;
				blauwImg.height = h;
				groenImg.width = l;
				groenImg.height = h;
				roodImg.width = l;
				roodImg.height = h;
				paarsImg.remove();
				geelImg.remove();
				
				vierkantImg.width = l;
				vierkantImg.height = h;
				driehoekImg.width = l;
				driehoekImg.height = h;
				cirkelImg.width = l;
				cirkelImg.height = h;
				sterImg.remove();
				zeshoekImg.remove();
			}
			
			function voegToeArraysNormaal(){
				paarsImg.display = "visible";
				paarsImg.width = l;
				paarsImg.height = h;
				paarsImg.addEventListener('click',function(){
						kleurGekozen(paarsImg.id)
					}
					,false);
				kleurArray.appendChild(paarsImg);
					
				sterImg.display = "visible";
				sterImg.width = l;
				sterImg.height = h;
				sterImg.addEventListener('click',function(){
						vormGekozen(sterImg.id)
					}
					,false);
				vormArray.appendChild(sterImg);
			}
			
			function voegToeArraysMoeilijk(){
				geelImg.display = "visible";
				geelImg.width = l;
				geelImg.height = h;
				geelImg.addEventListener('click',function(){
						kleurGekozen(geelImg.id);
					}
					,false);
				kleurArray.appendChild(geelImg);
					
				zeshoekImg.display = "visible";
				zeshoekImg.width = l;
				zeshoekImg.height = h;
				zeshoekImg.addEventListener('click',function(){
						vormGekozen(zeshoekImg.id)
					}
					,false);
				vormArray.appendChild(zeshoekImg);
			}
			
			function setArrays(){
				setArraysGemakkelijk();
				if(niveau > 1)
					voegToeArraysNormaal();
				if(niveau > 2)
					voegToeArraysMoeilijk();
			}
			
			function laadSpel(){
				
				setCanvasVariabelen();
				
				initCanvas();
				
				setArrays();
				
               
			}
			
                 function doWork() //AJAX gedeelte
                {
                    httpObject = getHTTPObject();
                    if (httpObject != null)
                    {
                        httpObject.open("GET","highscore.php?punten="+punten+"&niveau="+niveau,true);
                        httpObject.onreadystatechange = setOutput;
                        httpObject.send(null);
                    }
                }
            function getHTTPObject()
                {
                    if (window.ActiveXobject)
                        return new ActiveXobject("Microsoft.XMLHTTP");
                    else if (window.XMLHttpRequest)
                        return new XMLHttpRequest();
                    else
                    {
                        alert("Browser heeft geen support voor AJAX.");
                        return null;
                    }
                    
                }
            function setOutput()
                {
                    if(httpObject.readyState==4)
                        {
                            response= httpObject.responseText;
                            items = response.split(";");
                            document.getElementById("speler1").innerHTML ="speler 1: "+ items[0];
                            document.getElementById("speler2").innerHTML ="speler 2: "+ items[1];
                            document.getElementById("speler3").innerHTML ="speler 3: "+ items[2];
                            document.getElementById("speler4").innerHTML ="speler 4: "+ items[3];
                            document.getElementById("speler5").innerHTML ="speler 5: "+ items[4];
                           
                        }
                }
                
			</script>
	</body>
</html>